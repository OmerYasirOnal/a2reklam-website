---
import { getAllDistricts, getProvinceBySlug, LOCATIONS } from '../../../data/locations';
import Layout from '../../../layouts/Layout.astro';
import { WHATSAPP_LINK, PHONE_TEL } from '../../../consts';

export async function getStaticPaths() {
  const allDistricts = getAllDistricts();
  
  // Filter out Istanbul districts (they use the old /hizmet-bolgeleri/[slug] route)
  const nonIstanbulDistricts = allDistricts.filter(d => d.province !== 'istanbul');
  
  return nonIstanbulDistricts.map((district) => {
    const province = getProvinceBySlug(district.province);
    if (!province) return null;
    
    // Find 4 nearby districts (same province first, then others)
    const sameProvinceDistricts = allDistricts.filter(
      d => d.province === district.province && d.slug !== district.slug
    );
    const otherDistricts = allDistricts.filter(
      d => d.province !== district.province
    );
    const neighbors = [...sameProvinceDistricts, ...otherDistricts]
      .slice(0, 4)
      .map(d => ({
        name: d.trName,
        slug: d.slug,
        province: d.province,
      }));
    
    return {
      params: {
        province: district.province,
        district: district.slug,
      },
      props: {
        district,
        province,
        neighbors,
      },
    };
  }).filter(Boolean);
}

const { district, province, neighbors } = Astro.props;

const title = `${district.trName} Tabela ve Reklam Hizmetleri | A2 Reklam`;
const description = `${province.trName} ili ${district.trName} ilÃ§esinde profesyonel tabela Ã¼retimi ve montaj hizmetleri. Cephe tabelasÄ±, totem, Ä±ÅŸÄ±klÄ± tabela ve daha fazlasÄ±.`;

const breadcrumbs = [
  { name: 'Anasayfa', item: '/' },
  { name: 'Hizmet BÃ¶lgeleri', item: '/hizmet-bolgeleri/' },
  { name: province.trName, item: `/hizmet-bolgeleri/${province.slug}/` },
  { name: district.trName, item: `/hizmet-bolgeleri/${province.slug}/${district.slug}/` },
];

// Service highlights (rotate based on district hash)
const districtHash = district.slug.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
const serviceHighlights = [
  { name: 'Cephe TabelasÄ±', slug: 'cephe-tabela', icon: 'ğŸ¢' },
  { name: 'Totem Tabela', slug: 'totem', icon: 'ğŸ“' },
  { name: 'IÅŸÄ±klÄ± Tabela', slug: 'isikli-isiksiz-tabelalar', icon: 'ğŸ’¡' },
  { name: 'Kutu Harf', slug: 'paslanmaz-harfler', icon: 'âœ¨' },
  { name: 'AraÃ§ Giydirme', slug: 'arac-giydirme', icon: 'ğŸš—' },
  { name: 'YÃ¶nlendirme Sistemleri', slug: 'yonlendirme', icon: 'â¡ï¸' },
];
const selectedServices = [0, 1, 2, 3].map(i => serviceHighlights[(districtHash + i) % serviceHighlights.length]);

// FAQ (rotate based on district)
const faqSets = [
  [
    {
      question: `${district.trName}'da tabela montajÄ± ne kadar sÃ¼rer?`,
      answer: `${district.trName} bÃ¶lgesinde standart tabela montajÄ±mÄ±z 1-3 iÅŸ gÃ¼nÃ¼ iÃ§inde tamamlanÄ±r. Proje bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne gÃ¶re sÃ¼re deÄŸiÅŸebilir.`,
    },
    {
      question: 'Hangi tabela tÃ¼rlerini Ã¼retiyorsunuz?',
      answer: 'Cephe tabelasÄ±, totem, Ä±ÅŸÄ±klÄ±/Ä±ÅŸÄ±ksÄ±z tabelalar, kutu harf, paslanmaz harf, araÃ§ giydirme ve Ã¶zel imalat dahil tÃ¼m tabela Ã§eÅŸitlerini Ã¼retiyoruz.',
    },
    {
      question: 'Ãœcretsiz keÅŸif hizmeti veriyor musunuz?',
      answer: `Evet, ${province.trName} genelinde Ã¼cretsiz keÅŸif ve Ã¶lÃ§Ã¼m hizmeti sunuyoruz. Projenizi yerinde inceleyip detaylÄ± teklif hazÄ±rlÄ±yoruz.`,
    },
    {
      question: 'Tabela bakÄ±m ve onarÄ±m hizmeti var mÄ±?',
      answer: 'Evet, montaj sonrasÄ± bakÄ±m ve onarÄ±m desteÄŸi saÄŸlÄ±yoruz. IÅŸÄ±k arÄ±zalarÄ±, boya yenileme ve genel bakÄ±m hizmetlerimiz mevcuttur.',
    },
  ],
  [
    {
      question: `${district.trName} bÃ¶lgesinde hangi sektÃ¶rlere hizmet veriyorsunuz?`,
      answer: 'Perakende, restoran, otel, saÄŸlÄ±k, eÄŸitim, OSB, lojistik ve tÃ¼m kurumsal sektÃ¶rlere Ã¶zel tabela Ã§Ã¶zÃ¼mleri sunuyoruz.',
    },
    {
      question: 'Tabela tasarÄ±mÄ± yapÄ±yor musunuz?',
      answer: 'Evet, deneyimli tasarÄ±m ekibimiz markanÄ±za Ã¶zel tabela tasarÄ±mlarÄ± hazÄ±rlÄ±yor. Kurumsal kimliÄŸinize uygun Ã§Ã¶zÃ¼mler Ã¼retiyoruz.',
    },
    {
      question: 'Ruhsat ve izin iÅŸlemleri iÃ§in destek veriyor musunuz?',
      answer: `${district.trName} belediyesi tabela ruhsatÄ± ve gerekli izin sÃ¼reÃ§lerinde danÄ±ÅŸmanlÄ±k desteÄŸi saÄŸlÄ±yoruz.`,
    },
    {
      question: 'Ã–deme koÅŸullarÄ±nÄ±z nedir?',
      answer: 'Esnek Ã¶deme seÃ§enekleri sunuyoruz. Proje bazÄ±nda %50 kapora, teslimde kalan Ã¶deme ÅŸeklinde Ã§alÄ±ÅŸabiliriz.',
    },
  ],
];
const faq = faqSets[districtHash % faqSets.length];
---

<Layout title={title} description={description} breadcrumbs={breadcrumbs} faq={faq}>
  <div class="relative py-24 bg-secondary overflow-hidden">
    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[1000px] bg-primary/5 rounded-full blur-3xl pointer-events-none"></div>

    <div class="container mx-auto px-4 relative z-10">
      <!-- Hero Section -->
      <div class="text-center mb-16">
        <div class="inline-block mb-4 px-4 py-1 border border-primary/30 rounded-full bg-black/30 backdrop-blur text-primary text-sm font-semibold tracking-wider uppercase">
          {province.trName} / {district.trName}
        </div>
        <h1 class="font-heading font-black text-4xl md:text-6xl mb-6 text-white uppercase tracking-tight">
          {district.trName} <span class="text-primary">TABELA</span> VE REKLAM
        </h1>
        <p class="text-gray-300 max-w-3xl mx-auto text-lg leading-relaxed">
          {province.trName} ili {district.trName} ilÃ§esinde profesyonel tabela Ã¼retimi, tasarÄ±m ve montaj hizmetleri. 
          Kurumsal kimliÄŸinize uygun, kaliteli ve dayanÄ±klÄ± tabela Ã§Ã¶zÃ¼mleri sunuyoruz.
        </p>
      </div>

      <!-- Services Highlight -->
      <div class="mb-20">
        <h2 class="font-heading font-black text-3xl md:text-4xl mb-8 text-white text-center uppercase">
          Hizmetlerimiz
        </h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
          {selectedServices.map((service) => (
            <a
              href={`/hizmetler/${service.slug}/`}
              class="glass-card group p-6 text-center hover:scale-105 transition-transform"
            >
              <div class="text-4xl mb-3">{service.icon}</div>
              <h3 class="text-white font-bold text-sm md:text-base group-hover:text-primary transition-colors">
                {service.name}
              </h3>
            </a>
          ))}
        </div>
      </div>

      <!-- Process Section -->
      <div class="glass-card p-8 md:p-12 mb-20">
        <h2 class="font-heading font-black text-3xl md:text-4xl mb-8 text-white text-center uppercase">
          Ã‡alÄ±ÅŸma SÃ¼recimiz
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div class="text-center">
            <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center text-primary text-2xl font-black mx-auto mb-4">
              1
            </div>
            <h3 class="text-white font-bold mb-2">KeÅŸif</h3>
            <p class="text-gray-300 text-sm">Ãœcretsiz yerinde inceleme ve Ã¶lÃ§Ã¼m</p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center text-primary text-2xl font-black mx-auto mb-4">
              2
            </div>
            <h3 class="text-white font-bold mb-2">TasarÄ±m</h3>
            <p class="text-gray-300 text-sm">MarkanÄ±za Ã¶zel tabela tasarÄ±mÄ±</p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center text-primary text-2xl font-black mx-auto mb-4">
              3
            </div>
            <h3 class="text-white font-bold mb-2">Ãœretim</h3>
            <p class="text-gray-300 text-sm">Kaliteli malzeme ile Ã¶zenli imalat</p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center text-primary text-2xl font-black mx-auto mb-4">
              4
            </div>
            <h3 class="text-white font-bold mb-2">Montaj</h3>
            <p class="text-gray-300 text-sm">Profesyonel kurulum ve test</p>
          </div>
        </div>
      </div>

      <!-- Why A2 Reklam -->
      <div class="mb-20">
        <h2 class="font-heading font-black text-3xl md:text-4xl mb-8 text-white text-center uppercase">
          Neden <span class="text-primary">A2 Reklam</span>?
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="glass-card p-6">
            <div class="text-primary text-3xl mb-3">âœ“</div>
            <h3 class="text-white font-bold mb-2">14+ YÄ±l TecrÃ¼be</h3>
            <p class="text-gray-300 text-sm">2010'dan beri sektÃ¶rde gÃ¼venilir hizmet</p>
          </div>
          <div class="glass-card p-6">
            <div class="text-primary text-3xl mb-3">âœ“</div>
            <h3 class="text-white font-bold mb-2">Kaliteli Ãœretim</h3>
            <p class="text-gray-300 text-sm">DayanÄ±klÄ± malzeme ve Ã¶zenli iÅŸÃ§ilik</p>
          </div>
          <div class="glass-card p-6">
            <div class="text-primary text-3xl mb-3">âœ“</div>
            <h3 class="text-white font-bold mb-2">HÄ±zlÄ± Montaj</h3>
            <p class="text-gray-300 text-sm">ZamanÄ±nda teslimat garantisi</p>
          </div>
        </div>
      </div>

      <!-- CTA Section -->
      <div class="glass-card p-8 md:p-12 text-center mb-20">
        <h2 class="font-heading font-black text-3xl md:text-4xl mb-4 text-white uppercase">
          Hemen <span class="text-primary">Teklif AlÄ±n</span>
        </h2>
        <p class="text-gray-300 mb-8 max-w-2xl mx-auto">
          {district.trName} bÃ¶lgesindeki projeniz iÃ§in Ã¼cretsiz keÅŸif ve detaylÄ± teklif almak iÃ§in bizimle iletiÅŸime geÃ§in.
        </p>
        <div class="flex flex-col md:flex-row gap-4 justify-center">
          <a
            href={WHATSAPP_LINK}
            target="_blank"
            rel="noopener noreferrer"
            data-track="whatsapp"
            data-lang="tr"
            class="btn btn-primary px-8 py-4 text-lg font-bold uppercase"
          >
            WhatsApp ile Ä°letiÅŸim
          </a>
          <a
            href={`tel:${PHONE_TEL}`}
            data-track="call"
            data-lang="tr"
            class="btn btn-secondary px-8 py-4 text-lg font-bold uppercase"
          >
            Hemen Ara
          </a>
        </div>
      </div>

      <!-- Nearby Districts -->
      {neighbors.length > 0 && (
        <div>
          <h2 class="font-heading font-black text-3xl md:text-4xl mb-8 text-white text-center uppercase">
            YakÄ±n BÃ¶lgeler
          </h2>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            {neighbors.map((neighbor) => (
              <a
                href={`/hizmet-bolgeleri/${neighbor.province}/${neighbor.slug}/`}
                class="glass-card p-4 text-center hover:scale-105 transition-transform"
              >
                <span class="text-white font-bold text-sm">{neighbor.name}</span>
              </a>
            ))}
          </div>
        </div>
      )}
    </div>
  </div>
</Layout>
