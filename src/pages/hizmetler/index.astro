---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import { loadImagesManifest } from '../../utils/imagesManifest';
import { buildImageAlt } from '../../utils/imageSeo';
import { getServiceLabel } from '../../config/serviceLabels';

const services = await getCollection('services');
const sortedServices = services.sort((a, b) => a.data.title.localeCompare(b.data.title, 'tr'));

const manifest = loadImagesManifest();
const representativeByCategory = new Map<string, any>();
manifest.forEach((item: any) => {
  if (!representativeByCategory.has(item.category)) {
    representativeByCategory.set(item.category, item);
  }
});

const serviceCards = sortedServices.map((entry) => {
  const media = representativeByCategory.get(entry.slug);
  const name = getServiceLabel(entry.slug, 'tr') ?? entry.data.title;
  return {
    slug: entry.slug,
    title: name,
    description: entry.data.description,
    image: media?.paths?.['960'] ?? entry.data.heroImage,
    alt: buildImageAlt({ category: entry.slug, lang: 'tr' }),
  };
});

const title = 'Hizmetlerimiz | A2 Reklam';
const description = 'İstanbul genelinde kurumsal tabela, cephe uygulamaları ve yönlendirme çözümleri sunuyoruz. Tüm hizmetlerimizi burada keşfedin.';
const breadcrumbs = [
  { name: 'Anasayfa', item: '/' },
  { name: 'Hizmetler', item: '/hizmetler/' },
];

const topDistricts = [
  { label: 'Kâğıthane', href: '/hizmet-bolgeleri/kagithane-tabela/' },
  { label: 'Şişli', href: '/hizmet-bolgeleri/sisli-tabela/' },
  { label: 'Beşiktaş', href: '/hizmet-bolgeleri/besiktas-tabela/' },
  { label: 'Kadıköy', href: '/hizmet-bolgeleri/kadikoy-tabela/' },
  { label: 'Başakşehir', href: '/hizmet-bolgeleri/basaksehir-tabela/' },
  { label: 'Ümraniye', href: '/hizmet-bolgeleri/umraniye-tabela/' },
];

const faq = [
  {
    question: 'Hangi tabela türleri için teklif alabilirim?',
    answer: 'Cephe tabelaları, ışıklı/ışıksız tabelalar, yönlendirme sistemleri, totemler ve özel imalatlar dahil tüm kurumsal çözümler için teklif alabilirsiniz.',
  },
  {
    question: 'İstanbul dışında hizmet veriyor musunuz?',
    answer: 'Merkezimiz İstanbul’dadır ve ağırlıklı olarak İstanbul genelinde keşif ve montaj hizmeti sunuyoruz. Proje bazlı talepleri ayrıca değerlendiririz.',
  },
  {
    question: 'Keşif süreci nasıl ilerliyor?',
    answer: 'Konum ve uygulama detaylarını öğrendikten sonra yerinde keşif planlıyor, ölçü alıp doğru malzeme ve üretim planını çıkarıyoruz.',
  },
  {
    question: 'Üretim ve montaj süresi neye göre değişir?',
    answer: 'Ölçüler, malzeme seçimi, aydınlatma ihtiyaçları ve montaj lokasyonuna göre süre değişir. Net planlama keşif sonrası yapılır.',
  },
  {
    question: 'Kurumsal projeler için proje yönetimi desteği sağlıyor musunuz?',
    answer: 'Evet. Tasarım onayı, üretim planı, montaj koordinasyonu ve uygulama teslim süreçlerini tek noktadan yönetiyoruz.',
  },
];
---

<Layout title={title} description={description} lang="tr" breadcrumbs={breadcrumbs} faq={faq}>
  <div class="relative py-24 bg-secondary overflow-hidden">
    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[1000px] bg-primary/5 rounded-full blur-3xl pointer-events-none"></div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="text-center mb-16">
        <h1 class="font-heading font-black text-4xl md:text-6xl mb-6 text-white uppercase tracking-tight">
          HİZMET<span class="text-primary">LERİMİZ</span>
        </h1>
        <p class="text-gray-400 max-w-3xl mx-auto text-lg border-l-2 border-primary pl-4 inline-block">
          İstanbul genelinde kurumsal tabela üretimi ve montajı için uçtan uca hizmet veriyoruz. Cephe uygulamaları, yönlendirme ve özel imalatlar dahil tüm çözümler burada.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {serviceCards.map((service) => (
          <a href={`/hizmetler/${service.slug}/`} class="group relative block glass-card overflow-hidden hover:shadow-primary/20 transition-all duration-500 transform hover:-translate-y-2">
            <div class="relative h-64 overflow-hidden">
              <img
                src={service.image}
                alt={service.alt}
                class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 filter brightness-90 group-hover:brightness-100"
                loading="lazy"
              />
              <div class="absolute inset-0 bg-gradient-to-t from-secondary via-secondary/40 to-transparent opacity-90 group-hover:opacity-70 transition-opacity duration-300"></div>
              <div class="absolute bottom-0 left-0 w-full p-6 translate-y-2 group-hover:translate-y-0 transition-transform duration-300">
                <h2 class="font-heading font-bold text-2xl mb-2 text-white border-b-2 border-transparent group-hover:border-primary inline-block pb-1 transition-all">
                  {service.title}
                </h2>
                <p class="text-sm text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100">
                  {service.description}
                </p>
              </div>
            </div>
          </a>
        ))}
      </div>

      <div class="mt-16 grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
        <div class="glass-card p-8">
          <h2 class="font-heading font-bold text-3xl text-white mb-4">Kurumsal Projeler İçin Tek Nokta</h2>
          <p class="text-gray-400 mb-6">
            Fabrikalar, oteller, sağlık kuruluşları ve zincir mağazalar için kurumsal standartlarda tabela üretimi ve montajı sağlıyoruz. Keşiften montaja kadar tek ekip, net planlama.
          </p>
          <a href="/teklif-al/" data-track="lead-click" data-lead-type="quote" data-lang="tr" class="inline-flex items-center gap-2 bg-primary text-secondary font-bold px-6 py-3 rounded-lg hover:bg-white transition-all">
            Teklif Al
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" /></svg>
          </a>
        </div>
        <div class="glass-card p-8">
          <h3 class="font-heading font-bold text-2xl text-white mb-4">Öne Çıkan Hizmet Bölgeleri</h3>
          <p class="text-gray-400 mb-6">Yoğun kurumsal uygulama yaptığımız ilçelerden hızlı bağlantılar.</p>
          <div class="flex flex-wrap gap-3">
            {topDistricts.map((district) => (
              <a href={district.href} class="px-4 py-2 rounded-full border border-white/10 text-sm text-gray-300 hover:border-primary/60 hover:text-white transition-colors">
                {district.label}
              </a>
            ))}
          </div>
        </div>
      </div>

      <div class="mt-16 glass-card p-8">
        <h2 class="font-heading font-bold text-3xl text-white mb-6">Sık Sorulan Sorular</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          {faq.map((item) => (
            <div class="border border-white/5 rounded-xl p-5 bg-secondary/60">
              <h3 class="text-white font-semibold">{item.question}</h3>
              <p class="text-gray-400 text-sm mt-2">{item.answer}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</Layout>
