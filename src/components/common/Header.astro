---
import { getLocaleAlternates } from '../../utils/localeRoutes';

interface Props {
  lang?: string;
}

const { lang = 'tr' } = Astro.props;

const isRtl = lang === 'ar';
const alternates = getLocaleAlternates(Astro.url.pathname);

const items_tr = [
  { label: 'Anasayfa', href: '/' },
  { label: 'Hizmetler', href: '/hizmetler/' },
  { label: 'Hizmet Bölgeleri', href: '/hizmet-bolgeleri/' },
  { label: 'Hakkımızda', href: '/hakkimizda/' },
  { label: 'S.S.S', href: '/sss/' },
  { label: 'İletişim', href: '/iletisim/' },
];

const items_en = [
  { label: 'Home', href: '/en/' },
  { label: 'Services', href: '/en/services/' },
  { label: 'Service Areas', href: '/en/service-areas/' },
  { label: 'About Us', href: '/en/about/' },
  { label: 'F.A.Q', href: '/en/faq/' },
  { label: 'Contact', href: '/en/contact/' },
];

const items_ar = [
  { label: 'الرئيسية', href: '/ar/' },
  { label: 'الخدمات', href: '/ar/services/' },
  { label: 'اتصل بنا', href: '/ar/contact/' },
  { label: 'احصل على عرض سعر', href: '/ar/get-quote/' },
];

const items = lang === 'en' ? items_en : lang === 'ar' ? items_ar : items_tr;
const homeLink = lang === 'en' ? '/en/' : lang === 'ar' ? '/ar/' : '/';
const quoteLink = lang === 'en' ? '/en/get-quote/' : lang === 'ar' ? '/ar/get-quote/' : '/teklif-al/';
const quoteLabel = lang === 'en' ? 'Get Quote' : lang === 'ar' ? 'احصل على عرض سعر' : 'Teklif Al';

const languageLabels = { tr: 'Türkçe', en: 'English', ar: 'العربية' };
const languageOrder = ['tr', 'en', 'ar'] as const;
const languageLinks = languageOrder
  .filter((locale) => alternates[locale])
  .map((locale) => ({
    locale,
    href: alternates[locale],
    label: languageLabels[locale],
  }));
---

<header class="sticky top-0 z-50 bg-secondary/95 backdrop-blur-sm border-b border-white/10 transition-all duration-300">
  <div class:list={['container mx-auto px-4 h-20 flex items-center justify-between', isRtl && 'flex-row-reverse']}>
    <a href={homeLink} class="font-heading font-black text-2xl tracking-tighter text-white flex items-center gap-2">
      <span class="text-primary text-3xl">A2</span> REKLAM
    </a>

    <nav class:list={['hidden md:flex items-center gap-8', isRtl && 'flex-row-reverse']}>
      {items.map(item => (
        <a href={item.href} class="text-sm font-medium text-gray-300 hover:text-primary transition-colors uppercase tracking-wide">
          {item.label}
        </a>
      ))}
    </nav>

    <div class:list={['flex items-center gap-4', isRtl && 'flex-row-reverse']}>
      <div class="flex items-center gap-2">
        {languageLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              'text-xs font-bold border px-3 py-1.5 rounded transition-colors',
              link.locale === lang ? 'border-primary text-primary' : 'border-white/20 text-gray-300 hover:text-white hover:border-white',
            ]}
            aria-current={link.locale === lang ? 'page' : undefined}
          >
            {link.label}
          </a>
        ))}
      </div>
      <a href={quoteLink} data-track="lead-click" data-lead-type="quote" data-lang={lang} class="hidden md:inline-flex bg-primary text-secondary px-6 py-2.5 rounded text-sm font-bold hover:bg-white hover:text-secondary transition-all transform hover:-translate-y-0.5 shadow-lg shadow-primary/20">
        {quoteLabel}
      </a>
    </div>
  </div>
</header>
