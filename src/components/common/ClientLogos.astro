---
import { REFERENCES } from '../../data/references';

interface Props {
  lang?: string;
}

const { lang = 'tr' } = Astro.props;

// Use centralized references list; render even without logos with text badges
const clients = REFERENCES ?? [];

if (clients.length === 0) {
  return null;
}

const headings: Record<string, string> = {
  tr: 'Güvendikleri Markalar',
  en: 'Trusted Brands',
  ar: 'موثوق به من قبل',
};

const subheadings: Record<string, string> = {
  tr: 'İstanbul\'un önde gelen işletmeleri bizi tercih ediyor',
  en: 'Leading businesses in Istanbul choose us',
  ar: 'الشركات الرائدة في إسطنبول تختارنا',
};

const isRtl = lang === 'ar';
---

<section class="py-20 bg-secondary/50 border-y border-white/5">
  <div class="container mx-auto px-4">
    <div class:list={['text-center mb-12', isRtl && 'rtl']}>
      <p class="text-sm uppercase tracking-widest text-primary/80 font-semibold mb-2">
        {headings[lang] || headings.tr}
      </p>
      <p class="text-gray-400 text-sm">
        {subheadings[lang] || subheadings.tr}
      </p>
    </div>

    <div class:list={['grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6 place-items-center', isRtl && 'rtl']}>
      {clients.map(client => (
        <div class="glass-card w-full h-full min-h-[88px] flex items-center justify-center p-4 md:p-6 group">
          {client.logo ? (
            <img
              src={client.logo}
              alt={`${client.name} logo`}
              width="160"
              height="64"
              class="h-10 md:h-12 lg:h-14 w-auto opacity-85 grayscale group-hover:opacity-100 group-hover:grayscale-0 transition-all duration-300"
              loading="lazy"
              decoding="async"
            />
          ) : (
            <span class="text-gray-300/80 group-hover:text-gray-100 font-semibold text-xs md:text-sm tracking-wide uppercase text-center transition-colors duration-300">
              {client.name}
            </span>
          )}
        </div>
      ))}
    </div>
  </div>
</section>
