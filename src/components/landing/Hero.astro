---
import { loadImagesManifest } from '../../utils/imagesManifest';
import { buildImageAlt } from '../../utils/imageSeo';

// Read manifest to select a hero image
const manifest = loadImagesManifest();
let heroCategory = manifest[0]?.category || 'cephe-tabela';
let heroImage = manifest[0]?.paths?.['1600'] || '/assets/img/demo/a2reklam-cephe-tabela-001-1600.webp';

// Prefer 'cephe-tabela' or 'totem' for impact
const candidates = manifest.filter((m: any) =>
  ['cephe-tabela', 'totem'].includes(m.category)
);
if (candidates.length > 0) {
  const random = candidates[Math.floor(Math.random() * candidates.length)];
  heroImage = random.paths['1600'];
  heroCategory = random.category;
}

interface Props {
  lang?: string;
}
const { lang = 'tr' } = Astro.props;

const content = {
  tr: {
    title: 'Özel İşleriniz İçin Profesyonel Tabela Çözümleri',
    subtitle: 'İstanbul’un önde gelen tabela ve reklam üreticisi. Tasarımdan montaja tam hizmet.',
    cta: 'Hemen Teklif Al',
    link: '/teklif-al/'
  },
  en: {
    title: 'Professional Signage Solutions for Your Brand',
    subtitle: 'Leading signage manufacturer in Istanbul. Full service from design to installation.',
    cta: 'Get a Quote',
    link: '/en/get-quote/'
  },
  ar: {
    title: 'حلول لافتات احترافية لعلامتك التجارية',
    subtitle: 'مصنّع لافتات في إسطنبول يقدم الخدمة من التصميم حتى التركيب.',
    cta: 'احصل على عرض سعر',
    link: '/ar/get-quote/'
  },
};

const t = lang === 'ar' ? content.ar : lang === 'en' ? content.en : content.tr;
const heroAlt = buildImageAlt({ category: heroCategory, lang: lang === 'ar' ? 'ar' : lang === 'en' ? 'en' : 'tr' });
const isRtl = lang === 'ar';
---

<section class="relative min-h-[75vh] flex items-center justify-center text-white overflow-hidden bg-secondary">
  <!-- Background Image with Overlay -->
  <div class="absolute inset-0 z-0">
    <div class="absolute inset-0 bg-secondary/80 mix-blend-multiply z-10"></div>
    <div class="absolute inset-0 bg-gradient-to-t from-secondary via-secondary/50 to-transparent z-20"></div>
    <img src={heroImage} alt={heroAlt} class="w-full h-full object-cover opacity-60" />
  </div>

  <!-- Content -->
  <div class:list={['relative z-30 container mx-auto px-4 text-center', isRtl && 'text-right']}>
    <div class="inline-block mb-4 px-4 py-1 border border-primary/30 rounded-full bg-black/30 backdrop-blur text-primary text-sm font-semibold tracking-wider uppercase animate-fade-in-up">
      {lang === 'ar' ? 'منذ 2010' : lang === 'en' ? 'Since 2010' : '2010\'dan beri'}
    </div>
    
    <h1 class="font-heading font-black text-5xl md:text-7xl mb-6 leading-tight max-w-4xl mx-auto drop-shadow-2xl">
      {lang === 'en' 
        ? <span set:html="Premium <span class='text-primary'>Signage</span> & Advertising Solutions" />
        : lang === 'ar'
          ? <span set:html="<span class='text-primary'>حلول</span> لافتات وإعلانات متميزة" />
          : <span set:html="Premium <span class='text-primary'>Tabela</span> ve Reklam Çözümleri" />
      }
    </h1>
    
    <p class="text-xl text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed">
      {t.subtitle}
    </p>
    
    <div class="flex flex-col md:flex-row gap-4 justify-center items-center">
      <a
        href={t.link}
        data-track="lead-click"
        data-lead-type="quote"
        data-lang={lang}
        class="bg-primary text-secondary font-bold py-4 px-10 rounded text-lg hover:bg-white transition-all transform hover:-translate-y-1 shadow-[0_0_20px_rgba(207,181,59,0.3)]"
      >
        {t.cta}
      </a>
      <a href={lang === 'ar' ? '/ar/contact/' : lang === 'en' ? '/en/contact/' : '/iletisim/'} class="border border-white/20 hover:border-white text-white font-bold py-4 px-10 rounded text-lg transition-all backdrop-blur-sm bg-white/5 hover:bg-white/10">
        {lang === 'ar' ? 'تواصل معنا' : lang === 'en' ? 'Contact Us' : 'Bize Ulaşın'}
      </a>
    </div>
  </div>
</section>
